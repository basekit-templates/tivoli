
// -----------------------------
//  Ecommerce Product List
// -----------------------------


// Keeps filter icon within main container
.ecom-list [role="main"] {
    position: relative;
}


.ecomproductslist {


    &__product-list {
        @include flex-display;
        @include flex-wrap(wrap);
        @include justify-content(space-between);
    }


    &__product-item {
        margin-bottom: 40px;
        width: 31%;


        @media #{$desktop-1024px} {
            width: 48%;
        }


        @media #{$mobile-650px} {
            width: 100%;
        }
    }


    &__product-item-image {
        height: auto;
        line-height: auto;
    }


    &__image-link {
        height: initial!important;
        line-height: initial!important;
    }


    &__image {
        width: 100%;
    }


    &__product-content {
        background-color: $color__ecomproductslist-product-item--background;
        -webkit-box-shadow: 0px 0px 40px 0px rgba(0,0,0,0.05);
        -moz-box-shadow: 0px 0px 40px 0px rgba(0,0,0,0.05);
        box-shadow: 0px 0px 40px 0px rgba(0,0,0,0.05);
        display: inline-block;
        margin: -30px 0 0 20px;
        max-width: 80%;
        padding: 15px 20px 12px;
    }


    &__product-item-title,
    &__title-link {
        color: $color__blogpostlist-title--text;
        font-size: $font__h3--font-size * 1.1;
        line-height: $font__h3--line-height * 0.9;
        padding-bottom: 5px;
    }


    &__product-item-price {
        font-size: $font__p--font-size * 1.2;
        line-height: $font__p--line-height * 0.9;
    }
}




// -----------------------------
//  Ecommerce Filters
// -----------------------------


.toggle-filter {
    cursor: pointer;
    position: absolute;
    height: 20px;
    right: -5px;
    top: 5px;
    @include transform(rotate(90deg));


    &:hover .toggle-item {
         background: $color__button--background;
    }


    .animate {
        background: fade-out($color__button--background, 0.5);
        @include border-radius(50%);
        position: absolute;
        top: 50%;
        left: 50%;
        opacity: 1;
        @include transform(translate(-50%, -50%));
        z-index: -1;
    }


    .toggle-items .toggle-item {
        background: fade-out($color__button--background, 0.5);
        @include border-radius(50%);
        float: left;
        margin: 0 3px;
        position: relative;
        left: 0;
        height: 5px;
        width: 5px;
        @include transition(.5s cubic-bezier(.55, 0, .1, 1));


        @media #{$mobile-650px} {
            margin: 0 2px;
            height: 4px;
            width: 4px;
        }
    }


    &.active {


        .toggle-item {
            opacity: 0;
        }


        .toggle-active {
            transform: translate(-50%, -50%) scale(1) rotate(45deg);
            -webkit-transform: translate(-50%, -50%) scale(1) rotate(45deg);
            -ms-transform: translate(-50%, -50%) scale(1) rotate(45deg);
        }


        .toggle-after:before,
        .toggle-acive:after {
            transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%) rotate(45deg);
            -ms-transform: translate(-50%, -50%);
        }
    }


    .toggle-active {
        background: fade($color__button--background, 45%);
        @include border-radius(50%);
        position: absolute;
        top: 55%;
        left: 35%;
        opacity: 1;
        height: 25px;
        width: 25px;
        transform: translate(-50%, -50%) scale(0) rotate(270deg);
        -webkit-transform: translate(-50%, -50%) scale(0) rotate(270deg);
        -ms-transform: translate(-50%, -50%) scale(0) rotate(270deg);
        @include transition(.5s cubic-bezier(.55, 0, .1, 1));
        z-index: 2;


        &:before,
        &:after {
            background: white;
            content: "";
            position: absolute;
            top: 51%;
            left: 52%;
            @include transform(translate(-50%, -50%));
            z-index: 2;
        }


        &:before {
            width: 2px;
            height: 14px;
        }


        &:after {
            width: 14px;
            height: 2px;
        }
    }
}



// Product Search
.fieldset--search {


    .form-body {
        position: relative;
    }


    // Input and Button Full Width at Mobile
    .form-group {
        margin-bottom: 0;
        margin-right: 0;


        &:hover {
            background-color: transparent;
        }


        // Input Container
        &:first-child {


            @media #{$tablet-860px} {
                width: auto;
            }


            @media #{$mobile-650px} {
                margin-right: 0;
            }
        }


        .label--search {
            display: none;
            visibility: hidden;
        }


        input {
            font-family: $font__h4--font-family;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 0;
            font-size: 12px;
            font-weight: 500;
            height: 54px;
            padding: 0 12px;
            text-transform: uppercase;
        }


        // Button Container
        &:last-child {
            margin-right: 0;
            position: absolute;
            right: 0;
            top: 0;
        }
    }


    .button--clear {
        background: #B83838 image('/images/cancel-icon.png') no-repeat center;
        height: 54px;
        width: 55px;
        white-space: nowrap;
        text-indent: -99999px;


        &:hover {
            background-color: darken(#B83838, 10%);
        }
    }


    .ecomproductslist__button {
        color: $color__p--text;
        font-size: 12px;
        height: 52px;
        margin-right: 1px;


        @media #{$mobile-650px} {
            margin-top: -5px;
        }
    }
}


// Keep Search Inputs and Button inline at Mobile
.product-filters .fieldset--search .form-body {

    @media #{$mobile-650px} {
        @include flex-wrap(nowrap);
    }
}


// Keeps filter toggle icon in correct postioning
.filter-container {
    position: relative;
    margin: 0 auto;
    max-width: 1280px;
}


// Styling for if the clear filters button is present
.clear-filters {


    .product-filters {
        max-height: 100%;
        opacity: 1;
        visibility: visible;
    }


    .button--submit {
        display: none;
        visibility: hidden;
    }


    &.filters-open .product-filters {
        display: none;
        visibility: hidden;
    }


    .button--clear {
        height: 53px;
        position: relative;
        right: -2px;
        top: -3px;


        @media #{$mobile-650px} {
            top: -5px;
        }
    }


    .toggle-filter {
        top: 45px;


        &.active {
            top: 45px;
        }
    }


    .listing-header {
        display: block;
    }


    .listing-title {
        padding: 35px 30px 0;


        @media #{$mobile-650px}{
            padding-bottom: 20px;
        }
    }
}



// Bring Search and Filters Inline
// ------------------------------------------


// Form Container
form.ecomproductslist__form {
    width: 100%;


    // Search
    .fieldset--search {
        border: 0;
        margin-bottom: 35px;
        width: 100%;
    }


    .fieldset--filters {
        @include flex(1 1 auto);
    }
}


// Product Filters
.product-filters {
    background-color: $color__navigation--background;
    @include flex-display;
    @include flex-wrap(wrap);
    @include align-items(center);
    max-height: 0;
    opacity: 0;
    padding: 30px 40px;
    position: fixed;
    left: -400px;
    top: 0;
    bottom: 0;
    @include transition(left 0.25s ease-in-out);
    width: 425px;
    will-change: transition;
    z-index: 999;


    // Legend
    legend {
        color: black;
    }


    // Labels
    .ecomproductslist__label {
        font-size: 11px;
    }


    .form-group {
        display: block;
    }


    // Filters
    .fieldset--filters {


        .form-group {

            @media #{$mobile-650px} {
                display: block;
                margin-right: 0;
                width: 100%;
            }


            &:last-child {
                margin-right: 0;
            }
        }

        select {
            padding-right: 35px;
            width: 100%;


            @media #{$mobile-650px} {
                padding-right: 0;
            }
        }
    }


    .listing-order {
        padding: 0 0 20px;
    }
}


// Make product filters visible
.filters-open .product-filters {
    left: 0;
    max-height: 100%;
    opacity: 1;
    transition: left 0.25s ease-out, opacity 0.25s ease-out;
    will-change: transition;


    @media #{$mobile-650px} {
        margin-bottom: 30px;
    }
}

